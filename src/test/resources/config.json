{
    "path": "/E:/EclipseWorkspace/Commons/log-extractor/target/test-classes/log",
    "filter": "*.log",
    "outputPath": "/E:/EclipseWorkspace/Commons/log-extractor/target/test-classes/log",
    "commonProps": [
        { 
        	"name": "logtime",
            "type": "date",
            "format": "yyyy-MM-dd HH:mm:ss,SSS",
            "mode": "regex",
            "regex": "(\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2},\\d{3})\\s",
            "groupIndex": 1
        }, 
        {
        	"name": "id",
            "type": "string",
            "beginText": "id=",
            "endText": ","
        }
    ],
    "rules": [
        {
            "name": "sendCmd",
            "matchText": "sendRequest: cmd=(con|disc)",
            "useRegex": true,
            "ignoreCase": false,
            "props": [
                {
                	"name": "cmd",
                    "beginSkip": 0,
                    "beginText": "cmd=",
                    "endText": ","
                },
                {
                	"name": "addr",
                    "beginText": "<addr=",
                    "endText": ">",
                    "leftIncluded": false,
                    "rightIncluded": false
                }
            ]
        },
        {
            "name": "executed",
            "matchText": "execute\\((con|disc)\\)",
            "useRegex": true,
            "ignoreCase": false,
            "props": [
                {
                	"name": "total",
                    "beginText": "totalCost=",
                    "endText": ","
                },
                {
                	"name": "sendCost",
                    "beginText": "sendCost=",
                    "endText": ","
                },
                {
                	"name": "recvCost",
                    "beginText": "recvCost=",
                    "endText": ","
                },
                {
                	"name": "send",
                    "beginText": "send=",
                    "endText": ","
                }, 
                {
                	"name": "recv",
                    "beginText": "recv=",
                    "endText": ","
                }
            ]
        }
    ],
    "output": [
        {
            "name": "sendCmd"
        },
        {
            "name": "executed"
        }, 
        {
            "name": "sendCmd-join",
            "mainRule": "sendCmd",
            "mainRuleFieldAlias": {
                "logtime": "time"
            },
            "joins": [
                { 
                    "joinRuleName": "executed",
                    "keyMapping": {
                        "id": "id"
                    },
                    "fieldAlias": {
                        "total": "totalCost"
                    }
                }
            ],
            "fields": [
                "id",
                "time",
                "cmd",
                "totalCost",
                "recv",
                "send"
            ]
        }
    ]
}